ARG BUILDER_IMAGE=ghcr.io/capsize-games/airunner/airunner:builder
FROM ${BUILDER_IMAGE}

# Environment variables for development
ENV PATH="/home/appuser/.local/bin:$PATH"
ENV PYTHONUSERBASE=/home/appuser/.local/share/airunner/python
ENV PYTHONPATH=/home/appuser/.local/share/airunner/python/local/lib/python3.10/dist-packages:$PYTHONPATH
ENV PIP_CACHE_DIR=/home/appuser/.local/share/airunner/.cache/pip

# Copy application code
COPY --chown=appuser:appuser . /app/

# Setup entrypoint
USER appuser
WORKDIR /app
ENTRYPOINT ["/bin/bash", "/home/appuser/entrypoint.sh"]
CMD ["/bin/bash"]